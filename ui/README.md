# Handshacke Desktop UI (Tauri v2)

This desktop UI spawns and controls the local `handshacke` daemon as a sidecar.
The API binds to localhost by default, and the bearer token is generated by the launcher and kept in RAM.

## Setup (Windows)

1. Build the daemon binary:

```bash
cd ..
cargo build --release
```

2. Copy the daemon into the sidecar folder:

```bash
mkdir ui\\src-tauri\\bin
copy ..\\target\\release\\handshacke.exe ui\\src-tauri\\bin\\handshacke.exe
```

3. Install UI dependencies:

```bash
cd ui
npm install
```

4. Run the desktop app:

```bash
npm run dev
```

## Build (Windows)

```bash
cd ui
npm run build
```

## Authentication model

- `start_daemon` generates a random bearer token in the Tauri backend.
- The token is injected into the sidecar daemon via `HANDSHACKE_API_TOKEN`.
- The frontend receives the token from the launcher command and uses `Authorization: Bearer ...`.
- No token file is required in the current desktop flow.

## Behavior notes

- The GUI never logs the passphrase.
- The token is held in memory only for the app session.
- If `api_bind` is `0.0.0.0`, `--unsafe-expose-api` is required and a warning is shown.

## Tech stack

- Backend (Rust): Tauri v2 commands (`start_daemon`, `stop_daemon`, `daemon_status`, `daemon_logs`)
- Frontend (TypeScript/React): Vite + React (`src/App.tsx`)
- Plugins: `@tauri-apps/plugin-shell`

## Components

- Sidecar daemon control for `handshacke.exe`
- Auth pipeline with bearer token header injection
- Guided flows (classic, offer, hybrid, target, phrase, guaranteed, ethersync-space)
- EtherSync Space mode with chunked file publish + in-app file download reconstruction
- SSE log and status streaming
- QR generation for invite/offer flows
